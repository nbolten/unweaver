
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.7">
    
    
      
        <title>Graphs - Unweaver</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Unweaver" class="md-header__button md-logo" aria-label="Unweaver" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Unweaver
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Graphs
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
          
            <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nbolten/unweaver" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    nbolten/unweaver
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../getting-started/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../cli-reference/" class="md-tabs__link">
      CLI Reference
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link md-tabs__link--active">
        Library Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Unweaver" class="md-nav__button md-logo" aria-label="Unweaver" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    Unweaver
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nbolten/unweaver" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    nbolten/unweaver
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-a-project/" class="md-nav__link">
        Configure a project
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cli-reference/" class="md-nav__link">
        CLI Reference
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Library Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Library Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Library Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Graphs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Graphs
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graphs" class="md-nav__link">
    Graphs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unweaver.graphs.DiGraphGPKG" class="md-nav__link">
    DiGraphGPKG
  </a>
  
    <nav class="md-nav" aria-label="DiGraphGPKG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.add_edges_from" class="md-nav__link">
    add_edges_from()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.create_graph" class="md-nav__link">
    create_graph()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.update_edges" class="md-nav__link">
    update_edges()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unweaver.graphs.DiGraphGPKGView" class="md-nav__link">
    DiGraphGPKGView
  </a>
  
    <nav class="md-nav" aria-label="DiGraphGPKGView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.edges_dwithin" class="md-nav__link">
    edges_dwithin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.iter_edges" class="md-nav__link">
    iter_edges()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.size" class="md-nav__link">
    size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.to_in_memory" class="md-nav__link">
    to_in_memory()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unweaver.graphs.AugmentedDiGraphGPKGView" class="md-nav__link">
    AugmentedDiGraphGPKGView
  </a>
  
    <nav class="md-nav" aria-label="AugmentedDiGraphGPKGView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.augmented.AugmentedDiGraphGPKGView.prepare_augmented" class="md-nav__link">
    prepare_augmented()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../library-build/" class="md-nav__link">
        Build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../library-shortest-paths/" class="md-nav__link">
        Shortest paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../library-geopackage/" class="md-nav__link">
        GeoPackage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graphs" class="md-nav__link">
    Graphs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unweaver.graphs.DiGraphGPKG" class="md-nav__link">
    DiGraphGPKG
  </a>
  
    <nav class="md-nav" aria-label="DiGraphGPKG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.add_edges_from" class="md-nav__link">
    add_edges_from()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.create_graph" class="md-nav__link">
    create_graph()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.update_edges" class="md-nav__link">
    update_edges()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unweaver.graphs.DiGraphGPKGView" class="md-nav__link">
    DiGraphGPKGView
  </a>
  
    <nav class="md-nav" aria-label="DiGraphGPKGView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.edges_dwithin" class="md-nav__link">
    edges_dwithin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.iter_edges" class="md-nav__link">
    iter_edges()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.size" class="md-nav__link">
    size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.to_in_memory" class="md-nav__link">
    to_in_memory()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unweaver.graphs.AugmentedDiGraphGPKGView" class="md-nav__link">
    AugmentedDiGraphGPKGView
  </a>
  
    <nav class="md-nav" aria-label="AugmentedDiGraphGPKGView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unweaver.graphs.augmented.AugmentedDiGraphGPKGView.prepare_augmented" class="md-nav__link">
    prepare_augmented()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/nbolten/unweaver/edit/master/docs/library-graphs.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="reference">Reference</h1>
<h2 id="graphs">Graphs</h2>


<div class="doc doc-object doc-class">



<h2 id="unweaver.graphs.DiGraphGPKG" class="doc doc-heading">
        <code>unweaver.graphs.DiGraphGPKG</code>


</h2>


  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView" href="#unweaver.graphs.DiGraphGPKGView">DiGraphGPKGView</a></code></p>

  
      <p>Mutable directed graph backed by a GeoPackage. An extension of
unweaver.graphs.DiGraphGPKGView.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td><p>An optional path to database file (or :memory:-type string).</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>network</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="unweaver.network_adapters.GeoPackageNetwork">GeoPackageNetwork</span>]</code>
          </td>
          <td><p>An optional path to a custom GeoPackageNetwork instance.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>**kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>Keyword arguments compatible with networkx.DiGraph.</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DiGraphGPKG</span><span class="p">(</span><span class="n">DiGraphGPKGView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mutable directed graph backed by a GeoPackage. An extension of</span>
<span class="sd">    unweaver.graphs.DiGraphGPKGView.</span>

<span class="sd">    :param path: An optional path to database file (or :memory:-type string).</span>
<span class="sd">    :param network: An optional path to a custom GeoPackageNetwork instance.</span>
<span class="sd">    :param **kwargs: Keyword arguments compatible with networkx.DiGraph.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">node_dict_factory</span> <span class="o">=</span> <span class="n">Nodes</span>
    <span class="n">adjlist_outer_dict_factory</span> <span class="o">=</span> <span class="n">OuterSuccessors</span>
    <span class="c1"># TODO: consider creating a read-only Mapping in the case of immutable</span>
    <span class="c1">#       graphs.</span>
    <span class="n">adjlist_inner_dict_factory</span> <span class="o">=</span> <span class="nb">dict</span>
    <span class="n">edge_attr_dict_factory</span> <span class="o">=</span> <span class="n">Edge</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">network</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GeoPackageNetwork</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">):</span>
        <span class="c1"># TODO: Consider adding database file existence checker rather than</span>
        <span class="c1">#       always checking on initialization?</span>
        <span class="k">if</span> <span class="n">network</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># FIXME: should path be allowed to be None?</span>
            <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UnderspecifiedGraphError</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">UnderspecifiedGraphError</span><span class="p">(</span>
                        <span class="s2">&quot;DB file does not exist. Consider using &quot;</span>
                        <span class="s2">&quot;DiGraphGPKG.create_graph&quot;</span>
                    <span class="p">)</span>

                <span class="n">network</span> <span class="o">=</span> <span class="n">GeoPackageNetwork</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutable</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_graph</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DiGraphGPKG</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a new DiGraphGPKG (.gpkg) at a given path.</span>

<span class="sd">        :param path: The path of the new GeoPackage (.gpkg).</span>
<span class="sd">        :param **kwargs: Any other keyword arguments to pass to the new</span>
<span class="sd">        DiGraphGPKG instance.</span>
<span class="sd">        :returns: A new DiGraphGPKG instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">network</span> <span class="o">=</span> <span class="n">GeoPackageNetwork</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DiGraphGPKG</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_edges_from</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ebunch</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">],</span>
        <span class="n">_batch_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">counter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ProgressBar</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">attr</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Equivalent to add_edges_from in networkx but with batched SQL writes.</span>

<span class="sd">        :param ebunch: edge bunch, identical to nx ebunch_to_add.</span>
<span class="sd">        :param _batch_size: Number of rows to commit to the database at a time.</span>
<span class="sd">        :param **attr: Default attributes, identical to nx attr.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">_batch_size</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># User has entered invalid number (negative, zero) or 1. Use</span>
            <span class="c1"># default behavior.</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ebunch</span><span class="p">,</span> <span class="o">**</span><span class="n">attr</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># TODO: length check on each edge</span>
        <span class="n">features</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;_u&quot;</span><span class="p">:</span> <span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;_v&quot;</span><span class="p">:</span> <span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="n">edge</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">ebunch</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">write_features</span><span class="p">(</span>
            <span class="n">features</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">_batch_size</span><span class="p">,</span> <span class="n">counter</span><span class="o">=</span><span class="n">counter</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ebunch</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Update edges as a batch.</span>

<span class="sd">        :param ebunch: Any iterable of edge tuples (u, v, d).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># FIXME: this doesn&#39;t actually work. Implement update / upsert</span>
        <span class="c1">#        logic for GeoPackage feature tables, then use that.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">update_edges</span><span class="p">(</span><span class="n">ebunch</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.add_edges_from" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_edges_from</span><span class="p">(</span><span class="n">ebunch</span><span class="p">,</span> <span class="n">_batch_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">counter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">attr</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Equivalent to add_edges_from in networkx but with batched SQL writes.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ebunch</code></td>
          <td>
                <code><span title="typing.Iterable">Iterable</span>[<span title="unweaver.graph_types.EdgeTuple">EdgeTuple</span>]</code>
          </td>
          <td><p>edge bunch, identical to nx ebunch_to_add.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_batch_size</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Number of rows to commit to the database at a time.</p></td>
          <td>
                <code>1000</code>
          </td>
        </tr>
        <tr>
          <td><code>**attr</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>Default attributes, identical to nx attr.</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_edges_from</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ebunch</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">],</span>
    <span class="n">_batch_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="n">counter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ProgressBar</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">attr</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Equivalent to add_edges_from in networkx but with batched SQL writes.</span>

<span class="sd">    :param ebunch: edge bunch, identical to nx ebunch_to_add.</span>
<span class="sd">    :param _batch_size: Number of rows to commit to the database at a time.</span>
<span class="sd">    :param **attr: Default attributes, identical to nx attr.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">_batch_size</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="c1"># User has entered invalid number (negative, zero) or 1. Use</span>
        <span class="c1"># default behavior.</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ebunch</span><span class="p">,</span> <span class="o">**</span><span class="n">attr</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># TODO: length check on each edge</span>
    <span class="n">features</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;_u&quot;</span><span class="p">:</span> <span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;_v&quot;</span><span class="p">:</span> <span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="n">edge</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">ebunch</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">write_features</span><span class="p">(</span>
        <span class="n">features</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">_batch_size</span><span class="p">,</span> <span class="n">counter</span><span class="o">=</span><span class="n">counter</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.create_graph" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_graph</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a new DiGraphGPKG (.gpkg) at a given path.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>The path of the new GeoPackage (.gpkg).</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>**kwargs</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>Any other keyword arguments to pass to the new DiGraphGPKG instance.</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG" href="#unweaver.graphs.DiGraphGPKG">DiGraphGPKG</a></code>
          </td>
          <td><p>A new DiGraphGPKG instance.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_graph</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DiGraphGPKG</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a new DiGraphGPKG (.gpkg) at a given path.</span>

<span class="sd">    :param path: The path of the new GeoPackage (.gpkg).</span>
<span class="sd">    :param **kwargs: Any other keyword arguments to pass to the new</span>
<span class="sd">    DiGraphGPKG instance.</span>
<span class="sd">    :returns: A new DiGraphGPKG instance.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">GeoPackageNetwork</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">DiGraphGPKG</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.digraphgpkg.digraphgpkg.DiGraphGPKG.update_edges" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_edges</span><span class="p">(</span><span class="n">ebunch</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update edges as a batch.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ebunch</code></td>
          <td>
                <code><span title="typing.Iterable">Iterable</span>[<span title="unweaver.graph_types.EdgeTuple">EdgeTuple</span>]</code>
          </td>
          <td><p>Any iterable of edge tuples (u, v, d).</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ebunch</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update edges as a batch.</span>

<span class="sd">    :param ebunch: Any iterable of edge tuples (u, v, d).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># FIXME: this doesn&#39;t actually work. Implement update / upsert</span>
    <span class="c1">#        logic for GeoPackage feature tables, then use that.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">update_edges</span><span class="p">(</span><span class="n">ebunch</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="unweaver.graphs.DiGraphGPKGView" class="doc doc-heading">
        <code>unweaver.graphs.DiGraphGPKGView</code>


</h2>


  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><span title="networkx">nx</span>.<span title="networkx.DiGraph">DiGraph</span></code></p>

  
      <p>An immutable, <code>networkx</code>-compatible directed graph view over a
routable GeoPackage. Either the path to a .gpkg file or an existing
instance of
unweaver.network_adapters.geopackagenetwork.GeoPackageNetwork must be
provided.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>incoming_graph_data</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="networkx">nx</span>.<span title="networkx.DiGraph">DiGraph</span>]</code>
          </td>
          <td><p>Any class derived from <code>networkx.DiGraph</code>.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>path</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td><p>A path to the GeoPackage file (.gpkg). If no file exists at this path, one will be created.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>network</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="unweaver.network_adapters.GeoPackageNetwork">GeoPackageNetwork</span>]</code>
          </td>
          <td><p>An existing GeoPackageNetwork instance.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>**attr</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>Any parameters to be attached as graph attributes.</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg_view.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DiGraphGPKGView</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An immutable, `networkx`-compatible directed graph view over a</span>
<span class="sd">    routable GeoPackage. Either the path to a .gpkg file or an existing</span>
<span class="sd">    instance of</span>
<span class="sd">    unweaver.network_adapters.geopackagenetwork.GeoPackageNetwork must be</span>
<span class="sd">    provided.</span>

<span class="sd">    :param incoming_graph_data: Any class derived from `networkx.DiGraph`.</span>
<span class="sd">    :param path: A path to the GeoPackage file (.gpkg). If no file exists</span>
<span class="sd">    at this path, one will be created.</span>
<span class="sd">    :param network: An existing GeoPackageNetwork instance.</span>
<span class="sd">    :param **attr: Any parameters to be attached as graph attributes.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">node_dict_factory</span> <span class="o">=</span> <span class="n">NodesView</span>
    <span class="n">adjlist_outer_dict_factory</span> <span class="o">=</span> <span class="n">OuterSuccessorsView</span>
    <span class="c1"># In networkx, inner adjlist is only ever invoked without parameters in</span>
    <span class="c1"># order to assign new nodes or edges with no attr. Therefore, its</span>
    <span class="c1"># functionality can be accounted for elsewhere: via __getitem__ and</span>
    <span class="c1"># __setitem__ on the outer adjacency list.</span>
    <span class="n">adjlist_inner_dict_factory</span> <span class="o">=</span> <span class="nb">dict</span>
    <span class="n">edge_attr_dict_factory</span> <span class="o">=</span> <span class="n">EdgeView</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">incoming_graph_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">network</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GeoPackageNetwork</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">attr</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># Path attr overrides sqlite attr</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="n">GeoPackageNetwork</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">network</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Path or network must be set&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span>

        <span class="c1"># The factories of nx dict-likes need to be informed of the connection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjlist_inner_dict_factory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjlist_inner_dict_factory</span>

        <span class="c1"># FIXME: should use a persistent table/container for .graph as well.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_dict_factory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_succ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjlist_outer_dict_factory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pred</span> <span class="o">=</span> <span class="n">OuterPredecessorsView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">incoming_graph_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nx</span><span class="o">.</span><span class="n">convert</span><span class="o">.</span><span class="n">to_networkx_graph</span><span class="p">(</span>
                <span class="n">incoming_graph_data</span><span class="p">,</span> <span class="n">create_using</span><span class="o">=</span><span class="bp">self</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>

        <span class="c1"># Set custom flag for read-only graph DBs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutable</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The &#39;size&#39; of the directed graph, with the same behavior as</span>
<span class="sd">        `networkx.DiGraph`: if the weight parameter is set to a string, it&#39;s</span>
<span class="sd">        the sum of values for all edges that have that string as a key in their</span>
<span class="sd">        data dictionaries. If the weight parameter is unset, then it&#39;s the</span>
<span class="sd">        count of edges.</span>

<span class="sd">        :param weight: The string to use as an edge dictionary key to</span>
<span class="sd">        calculate a weighted sum over all edges.</span>
<span class="sd">        :returns: Either the number of edges (weight=None) or the sum of edge</span>
<span class="sd">        properties for the weight string.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">weight</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iter_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Roughly equivalent to the .edges interface, but much faster.</span>

<span class="sd">        :returns: generator of (u, v, d) similar to .edges, but where d is a</span>
<span class="sd">                  dictionary, not an Edge that syncs to database.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># FIXME: handle case where initializing with ddict data from query.</span>
        <span class="c1"># If implemented here (adding **d to the edge factory arguments), it</span>
        <span class="c1"># will always attempt to update the database on a per-read basis!</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edge_attr_dict_factory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">iter_edges</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">edges_dwithin</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Retrieve an iterable of edges within N meters of a</span>
<span class="sd">        latitude-longitude coordinate pair.</span>

<span class="sd">        :param lon: Longitude of the query point.</span>
<span class="sd">        :param lat: Latitude of the query point.</span>
<span class="sd">        :param distance: Search radius for the edge, can be thought of as</span>
<span class="sd">        defining the circle radius with which edges will be tested for</span>
<span class="sd">        intersection. Is in meters.</span>
<span class="sd">        :param sort: Whether to sort the iterable by distance such that the</span>
<span class="sd">        nearest edges are iterated over first.</span>
<span class="sd">        :returns: A generator of edge tuples, possibly sorted by distance</span>
<span class="sd">        (if the `sort` argument is set to True).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: document self.network.edges instead?</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">dwithin_edges</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="n">sort</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_in_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DiGraphGPKGView</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Copy the GeoPackage, itself an SQLite database, into an in-memory</span>
<span class="sd">        SQLite database. This may speed up queries and is useful if you want to</span>
<span class="sd">        create an ephemeral graph.</span>

<span class="sd">        :returns: A new instance of this class, backed by an in-memory SQLite</span>
<span class="sd">        database.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: make into &#39;copy&#39; method instead, taking path as a parameter?</span>
        <span class="n">db_id</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;file:unweaver-</span><span class="si">{</span><span class="n">db_id</span><span class="si">}</span><span class="s2">?mode=memory&amp;cache=shared&quot;</span>
        <span class="n">new_network</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">new_network</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.edges_dwithin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">edges_dwithin</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve an iterable of edges within N meters of a
latitude-longitude coordinate pair.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>lon</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Longitude of the query point.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>lat</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Latitude of the query point.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>distance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Search radius for the edge, can be thought of as defining the circle radius with which edges will be tested for intersection. Is in meters.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether to sort the iterable by distance such that the nearest edges are iterated over first.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Iterable">Iterable</span>[<span title="unweaver.graph_types.EdgeTuple">EdgeTuple</span>]</code>
          </td>
          <td><p>A generator of edge tuples, possibly sorted by distance (if the <code>sort</code> argument is set to True).</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg_view.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">edges_dwithin</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Retrieve an iterable of edges within N meters of a</span>
<span class="sd">    latitude-longitude coordinate pair.</span>

<span class="sd">    :param lon: Longitude of the query point.</span>
<span class="sd">    :param lat: Latitude of the query point.</span>
<span class="sd">    :param distance: Search radius for the edge, can be thought of as</span>
<span class="sd">    defining the circle radius with which edges will be tested for</span>
<span class="sd">    intersection. Is in meters.</span>
<span class="sd">    :param sort: Whether to sort the iterable by distance such that the</span>
<span class="sd">    nearest edges are iterated over first.</span>
<span class="sd">    :returns: A generator of edge tuples, possibly sorted by distance</span>
<span class="sd">    (if the `sort` argument is set to True).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: document self.network.edges instead?</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">dwithin_edges</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="n">sort</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.iter_edges" class="doc doc-heading">
<code class="highlight language-python"><span class="n">iter_edges</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Roughly equivalent to the .edges interface, but much faster.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Iterable">Iterable</span>[<span title="unweaver.graph_types.EdgeTuple">EdgeTuple</span>]</code>
          </td>
          <td><p>generator of (u, v, d) similar to .edges, but where d is a dictionary, not an Edge that syncs to database.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg_view.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">iter_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EdgeTuple</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Roughly equivalent to the .edges interface, but much faster.</span>

<span class="sd">    :returns: generator of (u, v, d) similar to .edges, but where d is a</span>
<span class="sd">              dictionary, not an Edge that syncs to database.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># FIXME: handle case where initializing with ddict data from query.</span>
    <span class="c1"># If implemented here (adding **d to the edge factory arguments), it</span>
    <span class="c1"># will always attempt to update the database on a per-read basis!</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edge_attr_dict_factory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">iter_edges</span><span class="p">()</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">size</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The 'size' of the directed graph, with the same behavior as
<code>networkx.DiGraph</code>: if the weight parameter is set to a string, it's
the sum of values for all edges that have that string as a key in their
data dictionaries. If the weight parameter is unset, then it's the
count of edges.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>weight</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td><p>The string to use as an edge dictionary key to calculate a weighted sum over all edges.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>Either the number of edges (weight=None) or the sum of edge properties for the weight string.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg_view.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The &#39;size&#39; of the directed graph, with the same behavior as</span>
<span class="sd">    `networkx.DiGraph`: if the weight parameter is set to a string, it&#39;s</span>
<span class="sd">    the sum of values for all edges that have that string as a key in their</span>
<span class="sd">    data dictionaries. If the weight parameter is unset, then it&#39;s the</span>
<span class="sd">    count of edges.</span>

<span class="sd">    :param weight: The string to use as an edge dictionary key to</span>
<span class="sd">    calculate a weighted sum over all edges.</span>
<span class="sd">    :returns: Either the number of edges (weight=None) or the sum of edge</span>
<span class="sd">    properties for the weight string.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">weight</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView.to_in_memory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_in_memory</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Copy the GeoPackage, itself an SQLite database, into an in-memory
SQLite database. This may speed up queries and is useful if you want to
create an ephemeral graph.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="unweaver.graphs.digraphgpkg.digraphgpkg_view.DiGraphGPKGView" href="#unweaver.graphs.DiGraphGPKGView">DiGraphGPKGView</a></code>
          </td>
          <td><p>A new instance of this class, backed by an in-memory SQLite database.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/digraphgpkg/digraphgpkg_view.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_in_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DiGraphGPKGView</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Copy the GeoPackage, itself an SQLite database, into an in-memory</span>
<span class="sd">    SQLite database. This may speed up queries and is useful if you want to</span>
<span class="sd">    create an ephemeral graph.</span>

<span class="sd">    :returns: A new instance of this class, backed by an in-memory SQLite</span>
<span class="sd">    database.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: make into &#39;copy&#39; method instead, taking path as a parameter?</span>
    <span class="n">db_id</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>
    <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;file:unweaver-</span><span class="si">{</span><span class="n">db_id</span><span class="si">}</span><span class="s2">?mode=memory&amp;cache=shared&quot;</span>
    <span class="n">new_network</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">new_network</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="unweaver.graphs.AugmentedDiGraphGPKGView" class="doc doc-heading">
        <code>unweaver.graphs.AugmentedDiGraphGPKGView</code>


</h2>


  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><span title="networkx">nx</span>.<span title="networkx.DiGraph">DiGraph</span></code></p>

  
      <p>A wrapper over DiGraphGPKGView that allows for overlaying an in-memory
DiGraph but with a seamless interface. When querying the graph, such as
asking for a particular edge based on a (u, d) pair (G[u][v]), an
AugmentedDiGraphGPKGView will first attempt to retrieve this edge from
the in-memory DiGraph, then check the DiGraphGPKGView.</p>
<p>This wrapper is particularly useful for adding temporary nodes and edges
for the purposes of running a graph analysis algorithm. For example,
Unweaver uses AugmentedDiGraphGPKGView when it's necessary to start
"part-way along" an edge for a shortest-path query using Dijkstra's
algorithm. There is often no on-graph node near the physical locationfrom
which someone wants to begin searching for shortest paths, so Unweaver
creates two new temporary edges starting from the nearest point on the
nearest edge, connecting them to the on-graph nodes for that edge, and
creates an AugmentedDiGraphGPKGView using those temporary edges.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>G</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="unweaver.graphs.digraphgpkg.DiGraphGPKGView" href="#unweaver.graphs.DiGraphGPKGView">DiGraphGPKGView</a></code>
          </td>
          <td><p>A DiGraphGPKGView, usually the main graph data.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>G_overlay</code></td>
          <td>
                <code><span title="networkx">nx</span>.<span title="networkx.DiGraph">DiGraph</span></code>
          </td>
          <td><p>A dict-of-dict-of-dicts (or networkx.DiGraph) to overlay.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>unweaver/graphs/augmented.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AugmentedDiGraphGPKGView</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A wrapper over DiGraphGPKGView that allows for overlaying an in-memory</span>
<span class="sd">    DiGraph but with a seamless interface. When querying the graph, such as</span>
<span class="sd">    asking for a particular edge based on a (u, d) pair (G[u][v]), an</span>
<span class="sd">    AugmentedDiGraphGPKGView will first attempt to retrieve this edge from</span>
<span class="sd">    the in-memory DiGraph, then check the DiGraphGPKGView.</span>

<span class="sd">    This wrapper is particularly useful for adding temporary nodes and edges</span>
<span class="sd">    for the purposes of running a graph analysis algorithm. For example,</span>
<span class="sd">    Unweaver uses AugmentedDiGraphGPKGView when it&#39;s necessary to start</span>
<span class="sd">    &quot;part-way along&quot; an edge for a shortest-path query using Dijkstra&#39;s</span>
<span class="sd">    algorithm. There is often no on-graph node near the physical locationfrom</span>
<span class="sd">    which someone wants to begin searching for shortest paths, so Unweaver</span>
<span class="sd">    creates two new temporary edges starting from the nearest point on the</span>
<span class="sd">    nearest edge, connecting them to the on-graph nodes for that edge, and</span>
<span class="sd">    creates an AugmentedDiGraphGPKGView using those temporary edges.</span>

<span class="sd">    :param G: A DiGraphGPKGView, usually the main graph data.</span>
<span class="sd">    :param G_overlay: A dict-of-dict-of-dicts (or networkx.DiGraph) to overlay.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">node_dict_factory</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">AugmentedNodesView</span>
    <span class="n">adjlist_outer_dict_factory</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="n">AugmentedOuterSuccessorsView</span>
    <span class="c1"># In networkx, inner adjlist is only ever invoked without parameters in</span>
    <span class="c1"># order to assign new nodes or edges with no attr. Therefore, its</span>
    <span class="c1"># functionality can be accounted for elsewhere: via __getitem__ and</span>
    <span class="c1"># __setitem__ on the outer adjacency list.</span>
    <span class="n">adjlist_inner_dict_factory</span> <span class="o">=</span> <span class="nb">dict</span>
    <span class="n">edge_attr_dict_factory</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="nb">dict</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">G</span><span class="p">:</span> <span class="n">DiGraphGPKGView</span><span class="p">,</span> <span class="n">G_overlay</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">):</span>
        <span class="c1"># The factories of nx dict-likes need to be informed of the connection</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;node_dict_factory&quot;</span><span class="p">,</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_dict_factory</span><span class="p">,</span> <span class="n">_G</span><span class="o">=</span><span class="n">G</span><span class="p">,</span> <span class="n">_G_overlay</span><span class="o">=</span><span class="n">G_overlay</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;adjlist_outer_dict_factory&quot;</span><span class="p">,</span>
            <span class="n">partial</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">adjlist_outer_dict_factory</span><span class="p">,</span> <span class="n">_G</span><span class="o">=</span><span class="n">G</span><span class="p">,</span> <span class="n">_G_overlay</span><span class="o">=</span><span class="n">G_overlay</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="c1"># Not &#39;partial&#39; on this?</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;adjlist_inner_dict_factory&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjlist_inner_dict_factory</span>
        <span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;edge_attr_dict_factory&quot;</span><span class="p">,</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edge_attr_dict_factory</span><span class="p">,</span> <span class="n">_G</span><span class="o">=</span><span class="n">G</span><span class="p">,</span> <span class="n">_G_overlay</span><span class="o">=</span><span class="n">G_overlay</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_node&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_dict_factory</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_succ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjlist_outer_dict_factory</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pred</span> <span class="o">=</span> <span class="n">AugmentedOuterPredecessorsView</span><span class="p">(</span><span class="n">_G</span><span class="o">=</span><span class="n">G</span><span class="p">,</span> <span class="n">_G_overlay</span><span class="o">=</span><span class="n">G_overlay</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">network</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">network</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">prepare_augmented</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">G</span><span class="p">:</span> <span class="n">DiGraphGPKGView</span><span class="p">,</span> <span class="n">candidate</span><span class="p">:</span> <span class="n">ProjectedNode</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create an AugmentedDiGraphGPKGView based on a DiGraphGPKGView and</span>
<span class="sd">        a start point candidatee (a ProjectedNode class instance). This will</span>
<span class="sd">        embed an overlay node and two edges.</span>

<span class="sd">        :param G: The base DiGraphGPKGView.</span>
<span class="sd">        :param candidate: The potential start point candidate.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temp_edges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_in</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_in</span><span class="p">:</span>
                <span class="n">temp_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_out</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_out</span><span class="p">:</span>
                <span class="n">temp_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">G_overlay</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">temp_edges</span><span class="p">:</span>
            <span class="n">G_overlay</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">temp_edges</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">temp_edges</span><span class="p">:</span>
                <span class="c1"># TODO: &#39;add_edges_from&#39; should automatically add geometry info</span>
                <span class="c1"># to nodes. This is a workaround for the fact that it doesn&#39;t.</span>
                <span class="n">G_overlay</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">geom_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                    <span class="n">d</span><span class="p">[</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">geom_column</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">G_overlay</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">geom_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                    <span class="n">d</span><span class="p">[</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">geom_column</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="n">G_augmented</span> <span class="o">=</span> <span class="n">AugmentedDiGraphGPKGView</span><span class="p">(</span><span class="n">G</span><span class="o">=</span><span class="n">G</span><span class="p">,</span> <span class="n">G_overlay</span><span class="o">=</span><span class="n">G_overlay</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">G_augmented</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="unweaver.graphs.augmented.AugmentedDiGraphGPKGView.prepare_augmented" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepare_augmented</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">candidate</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create an AugmentedDiGraphGPKGView based on a DiGraphGPKGView and
a start point candidatee (a ProjectedNode class instance). This will
embed an overlay node and two edges.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>G</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="unweaver.graphs.digraphgpkg.DiGraphGPKGView" href="#unweaver.graphs.DiGraphGPKGView">DiGraphGPKGView</a></code>
          </td>
          <td><p>The base DiGraphGPKGView.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>candidate</code></td>
          <td>
                <code><span title="unweaver.graph.ProjectedNode">ProjectedNode</span></code>
          </td>
          <td><p>The potential start point candidate.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>unweaver/graphs/augmented.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">prepare_augmented</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">G</span><span class="p">:</span> <span class="n">DiGraphGPKGView</span><span class="p">,</span> <span class="n">candidate</span><span class="p">:</span> <span class="n">ProjectedNode</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create an AugmentedDiGraphGPKGView based on a DiGraphGPKGView and</span>
<span class="sd">    a start point candidatee (a ProjectedNode class instance). This will</span>
<span class="sd">    embed an overlay node and two edges.</span>

<span class="sd">    :param G: The base DiGraphGPKGView.</span>
<span class="sd">    :param candidate: The potential start point candidate.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">temp_edges</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_in</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_in</span><span class="p">:</span>
            <span class="n">temp_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_out</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">candidate</span><span class="o">.</span><span class="n">edges_out</span><span class="p">:</span>
            <span class="n">temp_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">G_overlay</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">temp_edges</span><span class="p">:</span>
        <span class="n">G_overlay</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">temp_edges</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">temp_edges</span><span class="p">:</span>
            <span class="c1"># TODO: &#39;add_edges_from&#39; should automatically add geometry info</span>
            <span class="c1"># to nodes. This is a workaround for the fact that it doesn&#39;t.</span>
            <span class="n">G_overlay</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">geom_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                <span class="n">d</span><span class="p">[</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">geom_column</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">G_overlay</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">geom_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span>
                <span class="n">d</span><span class="p">[</span><span class="n">G</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">geom_column</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="n">G_augmented</span> <span class="o">=</span> <span class="n">AugmentedDiGraphGPKGView</span><span class="p">(</span><span class="n">G</span><span class="o">=</span><span class="n">G</span><span class="p">,</span> <span class="n">G_overlay</span><span class="o">=</span><span class="n">G_overlay</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">G_augmented</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../cli-reference/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CLI Reference" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              CLI Reference
            </div>
          </div>
        </a>
      
      
        
        <a href="../library-build/" class="md-footer__link md-footer__link--next" aria-label="Next: Build" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Build
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/nbolten" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
    
  </body>
</html>